services:
  imagemsite:
    image: julianafreires/site:imagemsite
    ports:
      - "3333:3333"
    networks:
      - rede-compose
    depends_on:
      - imagembanco

  imagembanco:
    image: julianafreires/site:imagembanco
    ports:
      - "3306:3306"
    networks:
      - rede-compose

  imagemr:
    build:
      context: ./InsigthsR
      dockerfile: Dockerfile
    networks:
      - rede-compose
    depends_on:
      - imagembanco
    volumes:
      - ./InsigthsR:/app
    command: ["Rscript", "/app/Dados_tratados.R"]

networks:
  rede-compose:
    driver: bridge
